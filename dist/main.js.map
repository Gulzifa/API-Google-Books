{"version":3,"file":"main.js","mappings":"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","sources":["webpack://googlebooks/./src/jsmodules/slider.js","webpack://googlebooks/webpack/bootstrap","webpack://googlebooks/./src/jsmodules/burger.js","webpack://googlebooks/./src/jsmodules/createBook.js","webpack://googlebooks/./src/jsmodules/loader.js"],"sourcesContent":["\r\n\r\n\r\n\r\nfunction initSlider() {\r\n    let slides = document.querySelectorAll('.slider__image');\r\n    let dots = document.querySelector('.slider__dots');\r\n\r\n    let currentSlideIndex = 0; //индекс текущего слайда\r\n    const arrDots = []; //создаем массив и добавим сюда новые точки (согласно кол-ву слайдов)\r\n\r\n    function addDots() {\r\n        slides.forEach((slide, index) => {\r\n            let dotItem = document.createElement('div');\r\n            dotItem.className = 'slider__dots-item';\r\n            dots.appendChild(dotItem);\r\n            arrDots.push(dotItem);\r\n\r\n            dotItem.addEventListener('click', function () {\r\n                moveSlide(index);\r\n                stopSliderTimer();\r\n            });\r\n        });\r\n        arrDots[0].classList.add('active-dot');\r\n    };\r\n    addDots();\r\n\r\n    function moveSlide(slideIndex) {\r\n        slides[currentSlideIndex].classList.remove('active-slide');\r\n        arrDots[currentSlideIndex].classList.remove('active-dot');\r\n        currentSlideIndex = slideIndex; // обновляем номер текущего индекса слайда\r\n        slides[currentSlideIndex].classList.add('active-slide');\r\n        arrDots[currentSlideIndex].classList.add('active-dot');\r\n        stopSliderTimer();\r\n        setTimeout(startSliderTimer, 5000);\r\n    }\r\n\r\n    function nextSlide() {\r\n        let newSlideIndex = currentSlideIndex + 1;\r\n        if (newSlideIndex >= slides.length) {\r\n            newSlideIndex = 0;\r\n        };\r\n        moveSlide(newSlideIndex);\r\n\r\n    }\r\n\r\n    //функция начала таймера \r\n    let sliderTimer;\r\n    function startSliderTimer() {\r\n        sliderTimer = setInterval(nextSlide, 5000);\r\n    }\r\n\r\n    function stopSliderTimer() {\r\n        clearInterval(sliderTimer);\r\n    }\r\n\r\n    startSliderTimer();\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", initSlider);","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\r\nconst menu = document.querySelector('.categories');\r\nconst menuBtn = document.querySelector('.categories__burger');\r\n\r\nexport function showCategories() {\r\n    if (menu && menuBtn) {\r\n    menuBtn.addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        menu.classList.toggle('show-menu')\r\n    })}\r\n}","\r\n\r\nconst booksWrap = document.querySelector('.books-wrap');\r\n\r\nfunction createBook(book) {\r\n        // создаем book-item\r\n        const bookItem = document.createElement('div');\r\n        bookItem.classList.add('book-item');\r\n\r\n        // создаем изображение книги\r\n        const bookImage = document.createElement('img');\r\n        bookImage.alt = 'Book image';\r\n        bookImage.classList.add('book-image');\r\n        const thumbnail = book.volumeInfo?.imageLinks?.thumbnail || 'https://www.svgrepo.com/show/508699/landscape-placeholder.svg';\r\n        bookImage.src = thumbnail;\r\n        bookItem.appendChild(bookImage);\r\n\r\n        // информация внутри book-item\r\n        const bookInform = document.createElement('div');\r\n        bookInform.classList.add('book-info');\r\n        bookItem.appendChild(bookInform);\r\n\r\n        // информация внутри bookInform\r\n        const bookAutor = document.createElement('p');\r\n        bookAutor.textContent = book.volumeInfo?.authors ? book.volumeInfo.authors.join(', ') : 'Unknown Author';\r\n        bookAutor.classList.add('book-info__autor');\r\n        bookInform.appendChild(bookAutor);\r\n\r\n        const bookTitle = document.createElement('h1');\r\n        bookTitle.textContent = book.volumeInfo?.title || 'No title';\r\n        bookTitle.classList.add('book-info__title');\r\n        bookInform.appendChild(bookTitle);\r\n\r\n        // рейтинг\r\n        if (book.volumeInfo?.averageRating) {\r\n            const bookRating = document.createElement('div');\r\n            bookRating.classList.add('book-info__rating');\r\n            bookInform.appendChild(bookRating);\r\n\r\n            const rating = parseFloat(book.volumeInfo.averageRating);\r\n            const ratingStars = document.createElement('div');\r\n            ratingStars.classList.add('rating-stars');\r\n\r\n            const roundedRating = Math.round(rating);\r\n            for (let i = 0; i < 5; i++) {\r\n                const star = document.createElement('span');\r\n                star.classList.add('star-element');\r\n                if (i < roundedRating) {\r\n                    star.classList.add('star-filled');\r\n                } else {\r\n                    star.classList.add('star-empty');\r\n                }\r\n                ratingStars.appendChild(star);\r\n            }\r\n            bookRating.appendChild(ratingStars);\r\n\r\n            if (book.volumeInfo?.ratingsCount) {\r\n                const ratingCount = document.createElement('p');\r\n                ratingCount.classList.add('rating-count');\r\n                ratingCount.textContent = `${book.volumeInfo.ratingsCount} review${book.volumeInfo.ratingsCount !== 1 ? 's' : ''}`;\r\n                bookRating.appendChild(ratingCount);\r\n            }\r\n        }\r\n\r\n        const bookDescription = document.createElement('p');\r\n        bookDescription.textContent = book.volumeInfo?.description || 'No description';\r\n        bookDescription.classList.add('book-info__description');\r\n        bookInform.appendChild(bookDescription);\r\n\r\n        if (book.saleInfo && book.saleInfo.listPrice) {\r\n            const bookPrice = document.createElement('p');\r\n            bookPrice.textContent = `${book.saleInfo.listPrice.amount} ${book.saleInfo.listPrice.currencyCode}`;\r\n            bookPrice.classList.add('book-info__price');\r\n            bookInform.appendChild(bookPrice);\r\n\r\n            const buyBtn = document.createElement('button');\r\n            buyBtn.textContent = 'Buy now';\r\n            buyBtn.classList.add('book-info__buy-button');\r\n            bookInform.appendChild(buyBtn);\r\n        }\r\n\r\n        booksWrap.appendChild(bookItem);\r\n    }\r\n\r\n    export {booksWrap, createBook}","\r\nimport { showCategories } from './burger';\r\nimport { booksWrap, createBook } from './createBook';\r\n\r\n\r\n\r\n// Корзинка\r\n\r\nconst cartIcon = document.querySelector('.header__cart');\r\nconst cartCounter = document.querySelector('.header__cart-counter');\r\nlet cartCount = 0;\r\n\r\n\r\nconst arrCategories = document.querySelectorAll('.category-link'); // массив категорий\r\nconst loadBtn = document.querySelector('.btn__load-books');\r\n\r\nlet startIndex = 0;\r\nconst maxResults = 6;\r\n\r\nlet loadedBooks = new Set(); // для хранения уникальных id уже загруженных книг\r\n\r\nasync function loadPage() {\r\n\r\n    async function getSelectedBooks(category) {\r\n        try {\r\n            const data = await fetch(`https://www.googleapis.com/books/v1/volumes?q=%22subject:${category}%22&key=AIzaSyBVpOv_v2QWwJ7tIBn0l90puNszL3MVqi8&printType=books&startIndex=${startIndex}&maxResults=${maxResults}&langRestrict=en`);\r\n            const response = await data.json();\r\n            const arrSelectedBooks = response.items || []; // проверка наличия массива items\r\n\r\n            if (startIndex === 0) {\r\n                booksWrap.innerHTML = ''; // очищаем контейнер только если startIndex равен 0\r\n                loadedBooks.clear(); // очищаем Set при первой загрузке\r\n            }\r\n\r\n            arrSelectedBooks.forEach(book => {\r\n                //проверка, была ли книга уже загружена в Set\r\n                if (!loadedBooks.has(book.id)) {\r\n                    loadedBooks.add(book.id);\r\n                    createBook(book); //создаем элемент книги для каждого элемента arrSelectedBooks\r\n                }\r\n            });\r\n            startIndex += maxResults;\r\n        } catch (error) {\r\n            console.error('Error getting books:', error);\r\n        }\r\n    };\r\n   \r\n    // Обработчики кликов на ссылки категорий\r\n    arrCategories.forEach(link => {\r\n        link.addEventListener('click', async (event) => {\r\n            event.preventDefault();\r\n            arrCategories.forEach(link => {\r\n                link.classList.remove('active');\r\n            });\r\n            link.classList.add('active');\r\n\r\n            const category = link.dataset.category;\r\n            startIndex = 0;\r\n            await getSelectedBooks(category);\r\n            addToCart();\r\n        });\r\n    });\r\n\r\n    //Обработчик клика на кнопку \"load more\"\r\n    loadBtn.addEventListener('click', async () => {\r\n        const category = document.querySelector('.category-link.active').dataset.category;\r\n        await getSelectedBooks(category);\r\n        addToCart();\r\n    });\r\n\r\n    //Обработчик клика на кнопку \"buy now\"\r\n    function addToCart() {\r\n        const buyButtons = document.querySelectorAll('.book-info__buy-button');\r\n        buyButtons.forEach(buyBtn => {\r\n            buyBtn.addEventListener('click', () => {\r\n                buyBtn.classList.add('buy-button-clicked');\r\n                cartCount++; //увеличиваем кол-во книг в корзине\r\n                cartCounter.textContent = cartCount.toString();\r\n                localStorage.setItem('cartCount', cartCount.toString());\r\n\r\n                if (cartCount > 0) {\r\n                    cartIcon.style.display = 'block';\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    //первая загрузка страницы\r\n    async function firstLoad() {\r\n        startIndex = 0;\r\n        const activeCategory = Array.from(arrCategories).find(category => category.classList.contains('active'));\r\n        if (activeCategory) {\r\n            const category = activeCategory.dataset.category;\r\n            await getSelectedBooks(category);\r\n        } else {\r\n            console.log('No active category found');\r\n        }\r\n        addToCart();\r\n    }\r\n\r\n    await firstLoad();\r\n    showCategories();\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    loadPage();\r\n    const cartCounter = document.querySelector('.header__cart-counter');\r\n    let cartCount = parseInt(localStorage.getItem('cartCount')) || 0;\r\n    cartCounter.textContent = cartCount.toString();\r\n    if (cartCount > 0) {\r\n        cartIcon.style.display = 'block';\r\n    }\r\n});\r\n\r\n\r\n\r\n"],"names":["document","addEventListener","slides","querySelectorAll","dots","querySelector","currentSlideIndex","arrDots","moveSlide","slideIndex","classList","remove","add","stopSliderTimer","setTimeout","startSliderTimer","nextSlide","newSlideIndex","length","sliderTimer","setInterval","clearInterval","forEach","slide","index","dotItem","createElement","className","appendChild","push","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","menu","menuBtn","booksWrap","cartIcon","cartCounter","cartCount","arrCategories","loadBtn","startIndex","loadedBooks","Set","async","loadPage","getSelectedBooks","category","data","fetch","arrSelectedBooks","json","items","innerHTML","clear","book","has","id","bookItem","bookImage","alt","thumbnail","volumeInfo","imageLinks","src","bookInform","bookAutor","textContent","authors","join","bookTitle","title","averageRating","bookRating","rating","parseFloat","ratingStars","roundedRating","Math","round","i","star","ratingsCount","ratingCount","bookDescription","description","saleInfo","listPrice","bookPrice","amount","currencyCode","buyBtn","createBook","error","console","addToCart","toString","localStorage","setItem","style","display","link","event","preventDefault","dataset","activeCategory","Array","from","find","contains","log","firstLoad","e","toggle","parseInt","getItem"],"sourceRoot":""}